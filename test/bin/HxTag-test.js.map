{
"version":3,
"file":"HxTag-test.js",
"sourceRoot":"file:///",
"sources":["/home/porfirio/Copy/Dev/Haxe/HxTag/src/hx/Btn.hx","/home/porfirio/Copy/Dev/Haxe/HxTag/src/hxtag/Tag.hx","/home/porfirio/Copy/Dev/Haxe/HxTag/src/hxtag/macro/TagBuilder.hx","/home/porfirio/Copy/Dev/Haxe/HxTag/src/hx/BtnGroup.hx","/home/porfirio/Copy/Dev/Haxe/HxTag/src/hx/Icon.hx","/home/porfirio/Copy/Dev/Haxe/HxTag/src/hx/Menu.hx","/home/porfirio/Copy/Dev/Haxe/HxTag/src/hxtag/dom/tools/Traversing.hx","/home/porfirio/Copy/Dev/Haxe/HxTag/src/hx/MenuBar.hx","/home/porfirio/Copy/Dev/Haxe/HxTag/src/hx/MenuItem.hx","/home/porfirio/Copy/Dev/Haxe/HxTag/src/hx/Meta.hx","/home/porfirio/Copy/Dev/Haxe/HxTag/src/hxtag/dom/tools/Attribute.hx","/home/porfirio/Copy/Dev/Haxe/HxTag/src/hxtag/dom/tools/Event.hx","/home/porfirio/Copy/Dev/Haxe/HxTag/test/src/hxtag/test/Main.hx","/home/porfirio/Copy/Dev/Haxe/HxTag/src/hxtag/Dom.hx"],
"sourcesContent":["package hx;\n\nimport hxtag.Dom.*;\nusing hxtag.DomTools;\nimport js.html.Event;\n\nclass Btn extends hxtag.Tag{\n\t\n\t@:Attribute\n\tpublic var checked:Bool;\t\n\t@:Attribute\n\tpublic var checkable:Bool;\n\t\n\tpublic var buttonGroup(default,null):BtnGroup;\n\t\n\n\tpublic function createdCallback() {\n\t\t\n\t}\n\tpublic function attachedCallback() {\n\t\tbuttonGroup=parentT(BtnGroup);\n\t\tif (buttonGroup != null) {\n\t\t\tbuttonGroup.testIt();\n\t\t\tif (buttonGroup.checkable)\n\t\t\t\tcheckable = true;\n\t\t\tif (buttonGroup.exclusive)\n\t\t\t\tif (checked)\n\t\t\t\t\tbuttonGroup.exclusiveCheckedBtn = this;\n\t\t}\n\t\tif (checked)\n\t\t\tcheckable = true;\n\t\tif (checkable)\n\t\t\ton(\"click\",_clicked);\t\n\t}\t\n\tpublic function detachedCallback() {\n// \t\ttrace(this);\n\t}\n\tfunction attributeChangedCallback(attrName:String, oldVal:String, newVal:String){}\n\n\tfunction _clicked(e:js.html.Event){\n\t\tchecked=!checked;\n\t\tdispatchEvent(new Event(\"change\"));\n\t\tif (buttonGroup != null) {\n\t\t\tif (buttonGroup.exclusive) {\n\t\t\t\tif (buttonGroup.exclusiveCheckedBtn!=null && buttonGroup.exclusiveCheckedBtn!=this)\n\t\t\t\t\tbuttonGroup.exclusiveCheckedBtn.checked = false;\n\t\t\t\tbuttonGroup.exclusiveCheckedBtn = this;\n\t\t\t}\n\t\t\t//var e = new js.html.CustomEvent(\"change\",{});\n\t\t\t//e.detail = { button:this };\n\t\t\tbuttonGroup.fireCustomEvent(\"change\", {button:this} );\n\t\t}\n\t\t\n\t}\n}","//\n// HxTag - Custom Elements for Haxe-JS\n// https://github.com/porfirioribeiro/HxTag/blob/master/LICENSE\n\npackage hxtag;\n\nimport haxe.macro.Expr;\nimport hxtag.tools.StringTools;\n@:autoBuild(hxtag.macro.TagBuilder.build())\nclass Tag #if !macro extends js.html.Element #end{\n\tfunction new(){}\n\tmacro public function on(ethis:Expr,eventType:Expr,eventListener:Expr){\n\t\treturn macro hxtag.dom.tools.Event.on($ethis,$eventType,$eventListener);\n\t}\n\n\tmacro function uid(ethis:Expr,name:String=\"id_\"){\n\t\tvar uid:String=name+Std.string(_UID++);\n\t\treturn macro $v{uid}\n\t}\n\t\n\t#if !macro\n\n\t#end\n\t#if macro\n\tstatic var _UID=0;\n\t#end\n}","//\n// HxTag - Custom Elements for Haxe-JS\n// https://github.com/porfirioribeiro/HxTag/blob/master/LICENSE\n\npackage hxtag.macro;\n\nimport haxe.macro.Expr;\nimport haxe.macro.Context;\n\nusing hxtag.macro.Tools;\nusing Lambda;\nusing StringTools;\nusing hxtag.tools.StringTools;\n\nclass TagBuilder \n{\n\n\tpublic static function build(){\n\t\t\n\t\tvar fields = Context.getBuildFields();\n\t\tvar klass = Context.getLocalClass().get();\n\t\tvar className = Context.getLocalClass().toString();\n\t\tvar type:Type = Context.getLocalType();\n\t\tvar pos = Context.currentPos();\n\t\t\n\t\tif (klass.superClass==null || !klass.superClass.t.get().unify(macro : js.html.Element))\n\t\t\tContext.fatalError('Class $className don\\'t extends js.html.Element',klass.pos);\n\n        //constructor handling\n\t\tvar fnew = fields.find(function(f) return f.name==\"new\");\n\n\t\tif (fnew!=null)\n\t\t\tContext.warning(\"Custom Tag's should not have a constructor, 'new' function\",fnew.pos);\n\n\t\tfields.push({\n\t\t\tname:\"new\",\n\t\t\tpos:Context.currentPos(),\n\t\t\tkind:FFun({\n\t\t\t\texpr:macro {super();},\n\t\t\t\tret: macro : Void,\n\t\t\t\targs:[]\n\t\t\t})\n\t\t});\n\t\t\n\n\t\t//tag\n\t\t\n\t\tvar noTagMeta =klass.meta.getMeta(\":noTag\");\n\t\tif (noTagMeta==null){\n\t\t\tvar tagMeta =klass.meta.getMeta(\":tag\");\n\t\t\tvar tag = if (tagMeta!=null && tagMeta.length==1) tagMeta[0].getValue();\n\t\t\t\telse klass.pack.join(\"-\")+\"-\"+klass.name.uncamelize();\n\n\t\t\tklass.meta.add(\":keepInit\",[],klass.pos);\n\n\n\n\t\t\tfields.push({\n\t\t\t\tname:\"TAG\",\n\t\t\t\taccess:[APublic,AStatic,AInline],\n\t\t\t\tkind:FVar(macro : String,macro $v{tag}),\n\t\t\t\tpos:Context.currentPos()\n\t\t\t});\t\t\n\t\t\n\t\t\tfields.push({\n\t\t\t\tname:\"create\",\n\t\t\t\tpos:pos,\n\t\t\t\taccess:[APublic,AStatic,AInline],\n\t\t\t\tkind:FFun( {\n\t\t\t\t\texpr:macro return untyped js.Browser.document.createElement($v{tag}),\n\t\t\t\t\tret:type,\n\t\t\t\t\targs:[]\n\t\t\t\t})\n\t\t\t});\t\t\n\n\t\t\tvar jsClassName = if (Context.defined(\"js-flatten\")) className.replace(\".\", \"_\") else className;\n\t\t\ttrace(jsClassName);\n\t\t\tfields.push({\n\t\t\t\tname:\"Element\",\n\t\t\t\tpos:pos,\n\t\t\t\taccess:[AStatic, APublic],\n\t\t\t\tmeta:[{name:\":keep\",pos:pos}],\n\t\t\t\tkind:FVar(type, macro untyped js.Browser.document.registerElement($v{tag},{prototype:$i{jsClassName}.prototype}))\n\t\t\t});\n\t\t}\n\n\n\n\t\t\n\n\t\tfor (f in fields) {\n\t\t\tswitch(f.kind) {\n\t\t\t\tcase FFun(_) if (~/(creat|attach|detach|attributeChang)edCallback/g.match(f.name)):\n\t\t\t\t\tf.meta.add(\":keep\",[],f.pos);\n\t\t\t\tcase _:\n\t\t\t}\n\t\t}\n\t\tfor (f in fields.copy()){\n\t\t\tvar fname=f.name;\n\t\t\tswitch (f.kind) {\n\t\t\t\tcase FVar(t,e):\n\t\t\t\t\tvar fw=f.meta.getMeta(\":Attribute\");\n\t\t\t\t\tif (fw!=null){\n \t\t\t\t\t\tf.kind=FProp(\"get\",\"set\",t,e);\n\t\t\t\t\t\tvar eget,eset;\n\t\t\t\t\t\tif (t.unify(macro :Bool)){\n\t\t\t\t\t\t\teget=macro return this.hasAttribute($v{fname});\n\t\t\t\t\t\t\teset=macro return hxtag.dom.tools.Attribute.toggleAtt(this, $v{fname},v);\n\t\t\t\t\t\t}else if (t.unify(macro :String)){\n\t\t\t\t\t\t\teget=macro return this.getAttribute($v{fname});\n\t\t\t\t\t\t\teset=macro return cast this.setAttribute($v{fname},v);\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar get={\n\t\t\t\t\t\t\tname:'get_$fname',\n\t\t\t\t\t\t\tkind:FFun({\n\t\t\t\t\t\t\t\texpr: eget,\n\t\t\t\t\t\t\t\tret: t,\n\t\t\t\t\t\t\t\targs: []\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\taccess: [AInline],\n\t\t\t\t\t\t\tpos:f.pos,\n\t\t\t\t\t\t\tmeta:[]\n\t\t\t\t\t\t};\n\t\t\t\t\t\tvar set={\n\t\t\t\t\t\t\tname:'set_$fname',\n\t\t\t\t\t\t\tkind:FFun({\n\t\t\t\t\t\t\t\texpr: eset,\n\t\t\t\t\t\t\t\tret: t,\n\t\t\t\t\t\t\t\targs: [{name:\"v\",type: t}]\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\taccess: [AInline],\n\t\t\t\t\t\t\tpos:f.pos,\n\t\t\t\t\t\t\tmeta:[]\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfields.push(get);\t\t\t\t\t\t\n\t\t\t\t\t\tfields.push(set);\n\t\t\t\t\t}else{\n\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\tcase FProp(get,set,t,e):\n\t\t\t\tcase FFun(f):\n\t\t\t}\n\t\t}\n\t\treturn fields;\n\t}\n\t\n\n\n}","\npackage hx;\n\n\n\nusing hxtag.DomTools;\nimport hxtag.Dom.*;\n\n// @:tag(\"hx-btn-group\")\nclass BtnGroup extends hxtag.Tag {\n\n\t@:Attribute\n\tpublic var exclusive:Bool;\n\t@:Attribute\n\tpublic var checkable:Bool;\n\t\n\t@:allow(hx)\n\tvar exclusiveCheckedBtn:Btn;\n\t\n\tpublic function createdCallback(){}\n\n\tpublic function attachedCallback() {\n// \t\ttrace(\"attached\");\n\t}\n\tpublic function detachedCallback() {\n// \t\ttrace(\"detached\");\n\t}\n\n\tpublic function testIt(){\n// \t\ttrace('btn-group:test');\n\t} \n}\n","package hx;\r\n\r\nimport hxtag.Tag;\r\n\r\n/**\r\n * ...\r\n * @author ...\r\n */\r\nclass Icon extends Tag\r\n{\r\n\t@:Attribute public var src:String;\r\n\t@:Attribute public var icon:String;\r\n\r\n\tpublic function createdCallback() \r\n\t{\r\n\t\tif (this.hasAttribute(\"src\"))\r\n\t\t\t_setSrc(src);\t\t\r\n\t}\r\n\t\r\n\tfunction attributeChangedCallback(attrName:String, oldVal:String, newVal:String){\r\n\t\tswitch (attrName) {\r\n\t\t\tcase \"src\": _setSrc(newVal);\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction _setSrc(src:String) {\r\n\t\ttrace('icon: set src to: $src');\r\n\t\tthis.textContent = '';\r\n\t\tthis.setAttribute('fit', '');\r\n\t\ttrace(this.style);\r\n\t\tthis.style.backgroundImage = 'url(' + this.src + ')';\r\n\t\tthis.style.backgroundPosition = 'center';\r\n\t\tthis.style.backgroundSize = '100%';\r\n\t\ttrace(this);\r\n\t}\r\n}","package hx;\nimport js.html.Element;\nimport js.html.MouseEvent;\nimport js.html.DivElement;\nimport js.html.SpanElement;\nimport js.html.DocumentFragment;\nimport hxtag.Tag;\n\nimport hxtag.Dom;\nusing hxtag.DomTools;\n\n@:noTag\nclass MenuBase extends Tag{\n\t@:Attribute\n\tpublic var text:String;\n\t\n\t@:Attribute\n\tpublic var iconSrc:String;\t\n\t\n\t@:Attribute\n\tpublic var iconClass:String;\n\t\n\t\n\tpublic function createdCallback(){\n// \t\ttrace(\"menubase: \"+text);\n\t}\n\n\n}\n\nclass Menu extends MenuBase {\n\t\n\tvar item:SpanElement;\n\tvar _visible:Bool;\n\t\n\tvar _menuBar:MenuBar;\n\tvar _menu:Menu;\n\t\n\toverride public function createdCallback() {\n\t\t\n\t}\n\t\n\tpublic function attachedCallback(){\n\t\t_menuBar=this.parentElement.as2(MenuBar,true);\n\t\t_menu=this.parentElement.as2(Menu,true);\n\t\tif (_menu!=null){\n\t\t\ttrace('Item $text is on menu');\n\t\t}else if (_menuBar!=null){\n\t\t\t\n\t\t\titem=Dom.document.createSpanElement();\n\t\t\titem.innerHTML=text;\n\t\t\tparentElement.insertBefore(item,this);\n\t\t\titem.on(\"mouseenter\",item_mouseenter);\n\t\t\titem.on(\"mouseleave\",item_mouseleave);\n\t\t\titem.on(\"mousedown\",item_mousedown);\n\t\t\ttrace('Item $text is on menubar');\n\t\t}else{\n\n\t\t}\n\t}\n\t\n\tfunction item_mouseenter(e:MouseEvent){\n\t\tif (_menuBar!=null && _menuBar.isMenuOpen){\n\t\t\tif (_menuBar.openedMenu!=null)\n\t\t\t\t_menuBar.openedMenu.close();\n\t\t\t_menuBar.openedMenu=this;\n\t\t\tshowAtElement(item);\n\t\t}\n\t}\t\n\tfunction item_mouseleave(e:MouseEvent){\n\t\t\t\ttrace(\"mouseleave\");\n// \t\t\t\tthis.toggle();\t\t\n\t}\t\n\tfunction item_mousedown(e:MouseEvent){\n\t\tif (_visible)\n\t\t\tclose();\n\t\telse\n\t\t\tshowAtElement(item);\t\n\t}\n\n\t\n\t//functions\n\t\n\tpublic function showAtPos(x:Int,y:Int) {\n\t\t_visible=true;\n\t\tif (_menuBar!=null){\n\t\t\t_menuBar.isMenuOpen=true;\n\t\t\t_menuBar.openedMenu=this;\n\t\t}\n\n\t\tif (item!=null)\n\t\t\titem.classList.toggle(\"opened\",true);\n\t\tthis.moveTo(x,y);\n\t\tthis.classList.toggle(\"show\",true);\n\t\tthis.classList.toggle(\"hide\",false);\n\t}\n\t\n\tpublic function showAtElement(e:Element){\n\t\t//TODO support diferent sides\n\t\tshowAtPos(e.offsetLeft,e.offsetTop+e.offsetHeight);\n\t}\n\n\tpublic function close(){\n\t\t_visible=false;\n\t\tif (item!=null)\n\t\t\titem.classList.toggle(\"opened\",false);\n\t\tif (_menuBar!=null)\n\t\t\t_menuBar.isMenuOpen=false;\n\t\tthis.classList.toggle(\"show\",false);\n\t\tthis.classList.toggle(\"hide\",true);\n\t}\n\n}","//\n// HxTag - Custom Elements for Haxe-JS\n// https://github.com/porfirioribeiro/HxTag/blob/master/LICENSE\n\npackage hxtag.dom.tools;\n\n\n#if macro\nimport haxe.macro.Expr;\nimport haxe.macro.Context;\nimport hxtag.macro.Tools;\nusing hxtag.macro.Tools;\n#else\n// import hxtag.dom.Element;\nimport js.html.Element;\nimport js.html.Node;\nimport hxtag.dom.ElementList;\nusing hxtag.DomTools;\n#end\n\n\nclass Traversing {\n\t// public static function find(e:ExprOf<Element>,query:String){\n\n\t// }\n\n\tmacro public static function find(e:ExprOf<Element>,query:ExprOf<String>)\n\t\treturn macro hxtag.Dom.find($e,$query);\n\t\n\tmacro public static function as2(e:ExprOf<Element>, t:ExprOf<Class<Element>>, check:Bool = false){\n\t\tvar tp=Context.toComplexType(Context.getType(t.toString()));\n\t\tif (check){\n\t\t\te= macro untyped if (__instanceof__($e, $t)) $e;\n\t\t}\n\t\treturn macro (cast $e : $tp);\n\t}\n\t\n\t// macro public static function findAll(e:ExprOf<Element>,query:String)\n\t// \treturn hxtag.Dom._query(e,query,true);\n\n\t#if !macro\n\tpublic static function add(e:Element){\n\t\ttrace(\"add element\"+e.className);\n\t}\n\n\tpublic static inline function is<T:Node>(e:Node,t:Class<T>):Bool\n\t\treturn untyped __instanceof__(e,t);\t\n\n// \tpublic static inline function as<T:Node>(e:Node, t:Class<T>):T {\n// \t\treturn (untyped if (__instanceof__(e, t)) e );\n// \t}\n\n\tpublic static function parent(e:Element,selector:String=null):Element{\n\t\tvar parent:Element = cast e.parentNode;\n\t\tif (selector!=null )\n\t\t\treturn (parent!=null && parent.nodeType==Node.ELEMENT_NODE && parent.matches(selector))? parent:null;\n\t\treturn (parent!=null && parent.nodeType != Node.DOCUMENT_FRAGMENT_NODE ) ? parent : null;\n\t}\n\n\tpublic static inline function parentT<T:Element>(e:Element,t:Class<T>):T\n\t\treturn (untyped if (__instanceof__(e.parentNode, t)) e.parentNode );\n\n\tpublic static function parents(e:Element,selector:String=null):Element{\n\t\treturn null;\n\t}\n\tpublic static function closest(e:Element,selector:String):Element{\n\t\twhile(e!=null){\n\t\t\tif (e.nodeType==Node.ELEMENT_NODE && e.matches(selector))\n\t\t\t\treturn e;\n\t\t\te=cast e.parentNode;\n\t\t}\n\t\treturn null;\n\t}\n\tpublic static function closestT<T:Element>(e:Element,t:Class<T>):T{\n\t\twhile(e!=null){\n\t\t\tif (untyped __instanceof__(e, t))\n\t\t\t\treturn cast e;\n\t\t\te=cast e.parentNode;\n\t\t}\n\t\treturn null;\t\t\n\t}\n\t#end\n}\n\nclass TraversingList{\n\t// public static function find(e:ExprOf<ElementList>,query:String){\n\n\t// }\t\n\tmacro public static function find(el:ExprOf<ElementList>,query:String){\n\t\tvar qs=query.substr(1);\n\t\tvar q= if (~/^\\.[a-zA-Z]*$/.match(query)) macro hxtag.dom.TraversingList.findByClass(el,$v{qs});\n\t\telse   if (~/^[a-zA-Z]*$/  .match(query)) macro findByTag(el,$v{query});\n\t\telse \t\t\t\t\t\t\t          macro hxtag.dom.Traversing.TraversingList.findByQuery($v{query});\n\t\treturn macro ($q : hxtag.dom.ElementList);\n\t}\n\t#if macro\n\t#else\n\tpublic static function add(el:ElementList){\n\t\ttrace(\"add elementlist\");\n\t\tel.each(function(e) Traversing.add(e));\n\t}\n\n\tpublic static function findByTag(el:ElementList,tag:String):ElementList{\n\t\tvar r:ElementList=[];\n\t\tel.each(function (e) untyped __js__(\"Array.prototype.push.apply\")(r, e.getElementsByTagName(tag)));\n\t\treturn r;\n\t}\t\n\tpublic static function findByClass(el:ElementList,tag:String):ElementList{\n\t\tvar r:ElementList=[];\n\t\tel.each(function (e) untyped __js__(\"Array.prototype.push.apply\")(r, e.getElementsByClassName(tag)));\n\t\treturn r;\n\t}\t\n\tpublic static function findByQuery(el:ElementList,tag:String):ElementList{\n\t\tvar r:ElementList=[];\n\t\tel.each(function (e) untyped __js__(\"Array.prototype.push.apply\")(r, e.querySelectorAll(tag)));\n\t\treturn r;\n\t}\n\t#end\n}","package hx;\n\nimport hxtag.Tag;\n\nimport hxtag.Dom;\nusing hxtag.DomTools;\n\nclass MenuBar extends Tag{\n\tpublic var isMenuOpen:Bool=false;\n\tpublic var openedMenu:Menu;\n}","package hx;\n\nimport hxtag.Tag;\n\nimport hxtag.Dom;\nusing hxtag.DomTools;\n\nimport hx.Menu.MenuBase;\n\t\nclass MenuItem extends Menu.MenuBase{\n\n\toverride public function createdCallback(){\n\t\tsuper.createdCallback();\n\t\tthis.innerHTML=text;\n\t}\n\n}\n\nclass MenuSeparator extends Menu.MenuBase{}","package hx;\n\nimport hxtag.Tag;\nimport hxtag.Dom;\nusing hxtag.DomTools;\n\n\nclass Meta extends Tag {\n\t@:Attribute\tpublic var type:String;\t\n\t@:Attribute\tpublic var label:String;\n\t\n\tpublic function createdCallback() {\n\t\tthis.querySelectorAll(\"hx-meta-item\");\n\t}\t\n}","package hxtag.dom.tools;\r\n\r\n/**\r\n * ...\r\n * @author ...\r\n */\r\nclass Attribute {\r\n\t\r\n\tpublic static function toggleAtt(e:js.html.Element, name:String, v:Bool):Bool \r\n\t\treturn (v)?cast e.setAttribute(name, \"\"):cast e.removeAttribute(name);\r\n\t\r\n\tpublic static inline function getAtt(e:js.html.Element, name:String):String \r\n\t\treturn e.getAttribute(name);\t\r\n\t\t\r\n\tpublic static inline function setAtt(e:js.html.Element, name:String, v:String):Void \r\n\t\te.setAttribute(name, v);\r\n\t\r\n\t\r\n}","//\n// HxTag - Custom Elements for Haxe-JS\n// https://github.com/porfirioribeiro/HxTag/blob/master/LICENSE\n\npackage hxtag.dom.tools;\n\n// typedef TConnection={e:hxtag.dom.Element,eventType:String,eventListener:js.html.EventListener};\n\n// abstract Connection(TConnection) from TConnection{\n// \tpublic inline function connect(){\n// \t\tthis.e._.addEventListener(this.eventType,this.eventListener);\n// \t}\n// \tpublic inline function disconnect(){\n// \t\tthis.e._.removeEventListener(this.eventType,this.eventListener);\n// \t}\n// }\n\nusing hxtag.DomTools;\nimport hxtag.tools.StringTools;\nimport js.Browser.*;\nimport js.html.Element;\n\n\ntypedef TLiveCon={selector:String,eventType:String,eventListener:js.html.EventListener};\n\nabstract LiveCon(TLiveCon) from TLiveCon to TLiveCon{\n\tpublic inline function die()\n\t\tEvent.removeLiveEvent(this.selector,this.eventType,this.eventListener);\n}\n\n\nclass Event{\n\tfunction new(){\n\t\t\n\t}\n\n\tpublic static inline function on(e:js.html.EventTarget,eventType:String,eventListener:js.html.EventListener):Void\n\t\te.addEventListener(eventType,eventListener);\n\n\tpublic static inline function off(e:js.html.EventTarget,eventType:String,eventListener:js.html.EventListener):Void\n\t\te.removeEventListener(eventType,eventListener);\n\t\n\tpublic static function one(e:js.html.EventTarget,eventType:String,eventListener:js.html.EventListener):haxe.Constraints.Function{\n\t\tvar fn=null;\n\t\tfn=function (event){\n\t\t\teventListener(event);\n\t\t\te.off(eventType,fn);\n\t\t}\n\t\te.on(eventType,fn);\n\t\treturn fn;\n\t}\n\n\tpublic static inline function fireCustomEvent(e:js.html.EventTarget, eventType:String, detail:Dynamic=null) {\n\t\te.dispatchEvent(untyped __new__(\"CustomEvent\",eventType,{ detail:detail } ));\n\t}\n\t\n\tpublic static inline function live(selector:String,eventType:String,eventListener:js.html.EventListener):LiveCon{\n\t\treturn addLiveEvent(selector,eventType,eventListener);\n\t}\n\n\tpublic static inline function die(selector:String,eventType:String,eventListener:js.html.EventListener):Void{\n\t\tremoveLiveEvent(selector,eventType,eventListener);\n\t}\n\t\n\t\n\n// Live Events\t\n\tstatic var registedLiveEvents:Array<String>=[];\n\tstatic var liveEvents:Map<String,Array<TLiveCon>>=new Map();\n\n\tpublic static function handleLiveEvent(event:js.html.Event):Void{\n\t\tvar evt=liveEvents[event.type];\n\t\tif (evt!=null){\n\t\t\tfor (evs in evt){\n\t\t\t\tif (cast(event.target,Element).matches(evs.selector))\n\t\t\t\t\tevs.eventListener(event);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic static function addLiveEvent(selector:String,eventType:String,eventListener:js.html.EventListener):LiveCon{\n\t\tif (untyped registedLiveEvents.indexOf(eventType)==-1){\n\t\t\tdocument.on(eventType,Event.handleLiveEvent);\n\t\t\tregistedLiveEvents.push(eventType);\n\t\t}\n\t\tif (liveEvents[eventType]==null)\n\t\t\tliveEvents[eventType]=[];\n\t\tvar con:LiveCon={selector:selector,eventType:eventType,eventListener:eventListener};\n\t\tliveEvents[eventType].push(con);\n\t\treturn con;\n\t}\n\n\tpublic static function removeLiveEvent(selector:String,eventType:String,eventListener:js.html.EventListener):Void{\n\t\tif (untyped registedLiveEvents.indexOf(eventType)==-1 || liveEvents[eventType]==null)\n\t\t\treturn;\n\t\tfor (evo in liveEvents[eventType])\n\t\t\tif (evo.selector==selector && evo.eventListener==eventListener)\n\t\t\t\tliveEvents[eventType].remove(evo);\n\t\tif (liveEvents[eventType].length==0){\n\t\t\tjs.Browser.document.off(eventType,Event.handleLiveEvent);\n\t\t\tregistedLiveEvents.remove(eventType);\n\t\t}\n\t}\n\n}","//\n// HxTag - Custom Elements for Haxe-JS\n// https://github.com/porfirioribeiro/HxTag/blob/master/LICENSE\n\npackage hxtag.test;\n\n\nimport hx.Btn;\nimport hxtag.Dom;\nusing hxtag.DomTools;\n//\n\n\n\nclass Main\n{\n\tfunction new() {trace(\"new\");}\n\tstatic function main() \n\t{\n\t\tvar observer=new js.html.MutationObserver(function(records:Array<js.html.MutationRecord>) {\n\t\t\tfor (r in records) {\n\t\t\t\tfor (e in r.addedNodes) \n\t\t\t\t\tuntyped\tif (e.attachedCallback)\te.attachedCallback();\n\t\t\t\t//for (e in r.removedNodes) \n\t\t\t\t\t//untyped\tif (e.detachedCallback)\te.detachedCallback();\t\t\t\t\n\t\t\t}\n\t\t});\n\t\tobserver.observe(Dom.document, { childList:true, attributes:true, subtree:true } );\n\t\tDom.document.on(\"DOMContentLoaded\",ready);\n\n\t}\n\tstatic function ready(e){\n// \t\ttrace(\"ready\");\n\n\t\tvar btn = Btn.create();\n\t\tbtn.innerHTML = \"btn\";\n\n\t\t\n\t\tDom.document.body.appendChild(btn);\n\t\tDom.document.body.removeChild(btn);\n\t\t//var els=Dom.qA(\"hx-btn\");\n\t\t//els.each(function(el) el.on(\"changed\",function(e) trace(e.target.checked)));\n\t\t\n\t\tvar el =\tDom.q(\"#hx-btn-ong\", Btn);\n\t\n\t\t//el.on(\"change\", function(e) trace(e));\n\t\t//el.onchange = function(e) trace(\"whoa\");\n\t\t//el.buttonGroup.onchange = function(e:js.html.CustomEvent) {\n\t\t\t//trace(e.detail.button);\n\t\t//}\n\n\t}\n\t\n}","//\n// HxTag - Custom Elements for Haxe-JS\n// https://github.com/porfirioribeiro/HxTag/blob/master/LICENSE\n\npackage hxtag;\n\n\n\n#if (macro || display)\nimport haxe.macro.Expr;\nimport haxe.macro.Context;\nusing haxe.macro.Tools;\n#end\n\nclass Dom {\n\n\t#if !macro\n\tpublic static var window(get, never):js.html.DOMWindow;\n\tinline static function get_window() return untyped __js__(\"window\");\n\n\tpublic static var document(get, never):js.html.Document;\n\tinline static function get_document() return untyped __js__(\"window.document\");\n\t#end\n\n\tmacro public static function q(query:String, t:Expr=null){\n\t\tvar qs=query.substr(1);\n\t\tvar q= if (~/^#[a-zA-Z]*$/ .match(query)) macro js.Browser.document.getElementById($v{qs});\n\t\telse   if (~/^\\.[a-zA-Z]*$/.match(query)) macro js.Browser.document.getElementsByClassName($v{qs})[0];\n\t\telse   if (~/^[a-zA-Z]*$/  .match(query)) macro js.Browser.document.getElementsByTagName($v{query})[0];\n\t\telse \t\t\t\t\t\t\t          macro js.Browser.document.querySelector($v{query});\n\t\tvar ts = t.toString();\n\t\tvar type=if (ts == \"null\")\n\t\t\tmacro : js.html.Element;\n\t\telse\n\t\t\tContext.getType(t.toString()).toComplexType();\n\t\treturn macro (cast $q : $type);\n\t}\n\n\tmacro public static function qA(query:String){\n\t\tvar qs=query.substr(1);\n\t\tvar q= if (~/^#[a-zA-Z]*$/ .match(query)) macro [js.Browser.document.getElementById($v{qs})];\n\t\telse   if (~/^\\.[a-zA-Z]*$/.match(query)) macro js.Browser.document.getElementsByClassName($v{qs});\n\t\telse   if (~/^[a-zA-Z]*$/  .match(query)) macro js.Browser.document.getElementsByTagName($v{query});\n\t\telse \t\t\t\t\t\t\t          macro js.Browser.document.querySelectorAll($v{query});\n\t\treturn macro ($q : hxtag.dom.ElementList);\n\t}\n\n\tmacro public static function find(ctx:Expr,query:String){\n\t\tvar qs=query.substr(1);\n\t\tvar q= if (~/^\\.[a-zA-Z]*$/.match(query)) macro $ctx.getElementsByClassName($v{qs});\n\t\telse   if (~/^[a-zA-Z]*$/  .match(query)) macro $ctx.getElementsByTagName($v{query});\n\t\telse \t\t\t\t\t\t\t          macro $ctx.querySelectorAll($v{query});\n\t\treturn macro ($q : hxtag.dom.ElementList);\n\t}\n\n\n}"],
"names":[],
"mappings":"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"
}